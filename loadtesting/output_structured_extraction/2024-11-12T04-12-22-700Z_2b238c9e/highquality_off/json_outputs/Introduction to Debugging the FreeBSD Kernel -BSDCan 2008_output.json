{
  "file_name": "Introduction to Debugging the FreeBSD Kernel -BSDCan 2008.pdf",
  "task_id": "cc6154e5-49d0-46e6-979c-f11fe1373316",
  "output": {
    "chunks": [
      {
        "segments": [
          {
            "segment_id": "0cef281e-e774-4e07-a0d8-ebc587150b73",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 1,
            "page_width": 794,
            "page_height": 595,
            "content": "Introduction to Debugging the \r\nFreeBSD Kernel\r\nMay 17, 2008\r\nJohn Baldwin\r\njhb@FreeBSD.org",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/0cef281e-e774-4e07-a0d8-ebc587150b73.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=9d62550cf07d6c883d9999f186f6747fe7b7a1cfb3a00a334d75bf29abb3735b",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "a9d3ae1f-ae24-4f51-b957-fa84d279aa12",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 2,
            "page_width": 794,
            "page_height": 595,
            "content": "2\r\nIntroduction\r\n● Existing Documentation\r\n● DDB\r\n● kgdb\r\n● Debugging Strategies",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/a9d3ae1f-ae24-4f51-b957-fa84d279aa12.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=5af666672d7c415dd32736a755213d21cacabee8dafeaad04905bd8293f34eff",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "f97f1fc5-48c7-45fe-aa2f-acc828e849df",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 3,
            "page_width": 794,
            "page_height": 595,
            "content": "3\r\nExisting Documentation\r\n● Kernel Debugging chapter of FreeBSD \r\nDeveloper's Handbook\r\n– Compiling a Debug Kernel\r\n– Invoking DDB, kgdb\r\n● ddb(4) Manual Page\r\n● GDB Documentation",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/f97f1fc5-48c7-45fe-aa2f-acc828e849df.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=9a60df8d2eeb85f0c3dd577689c2ec70c1e12c891fa94cc5202210e7bd2ed9de",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "e4ab71b5-01c1-4082-ada9-3f5bbc54bfad",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 4,
            "page_width": 794,
            "page_height": 595,
            "content": "4\r\nDDB\r\n● Investigating Deadlocks\r\n– “ps”, “show thread”, and “show turnstile”\r\n– “show lockchain” and “show sleepchain”\r\n● Adding New Commands",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/e4ab71b5-01c1-4082-ada9-3f5bbc54bfad.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=677771782439069121477cc3fe8c36e1c639009784441cdde625a6106348aed5",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "c65fdcc4-3d73-49b6-a90a-bc8dc05d290a",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 5,
            "page_width": 794,
            "page_height": 595,
            "content": "5\r\nDDB “ps”\r\ndb> ps\r\n pid ppid pgrp uid state wmesg wchan cmd\r\n 954 0 0 0 LL (threaded) crash2\r\n100144 L *abc 0xffffff0001288dc0 [crash2: 3]\r\n100143 L *jkl 0xffffff0001288c80 [crash2: 2]\r\n100142 L *ghi 0xffffff0001288be0 [crash2: 1]\r\n100055 L *def 0xffffff0001288d20 [crash2: 0]\r\n 812 0 0 0 SL - 0xffffffff80673a20 [nfsiod 0]\r\n 771 769 771 26840 Ss+ ttyin 0xffffff00011b9810 tcsh\r\n 769 767 767 26840 S select 0xffffff00018ca0d0 sshd\r\n 767 705 767 0 Ss sbwait 0xffffff00016ed94c sshd\r\n...\r\n 10 0 0 0 RL (threaded) idle\r\n100005 Run CPU 0 [idle: cpu0]\r\n100004 Run CPU 1 [idle: cpu1]\r\n100003 Run CPU 2 [idle: cpu2]\r\n100002 Run CPU 3 [idle: cpu3]",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/c65fdcc4-3d73-49b6-a90a-bc8dc05d290a.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=ca6beccdf84b63d247a2a4a8baa96a419092e5d919663dacf17b8734e6078542",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "f3318589-9996-4855-b6b6-44f9a8e3bad3",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 6,
            "page_width": 794,
            "page_height": 595,
            "content": "6\r\nThreads and Turnstiles\r\ntd_contested\r\nts_owner\r\ntd_contested\r\nts_owner",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/f3318589-9996-4855-b6b6-44f9a8e3bad3.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=a37c489166e2efd5f232d2b3041598000e929f114f4953d8198e8205f5c52048",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "389e9254-ab3a-4650-9f41-01ed6f4be2be",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 7,
            "page_width": 794,
            "page_height": 595,
            "content": "7\r\nDDB “show thread” and “show \r\nturnstile”\r\ndb> show thread 100055\r\nThread 100055 at 0xffffff00013869c0:\r\n proc (pid 954): 0xffffff0001354000\r\n name: crash2: 0\r\n stack: 0xffffffffae213000-0xffffffffae216fff\r\n flags: 0x4 pflags: 0x200000\r\n state: INHIBITED: {LOCK}\r\n lock: def turnstile: 0xffffff0001288d20\r\n priority: 224\r\ndb> show turnstile 0xffffff0001288d20\r\nLock: 0xffffffffae3c6fc0 - (sleep mutex) def\r\nLock Owner: 0xffffff000155c680 (tid 100142, pid 954, \"crash2: 1\")\r\nShared Waiters:\r\n empty\r\nExclusive Waiters:\r\n 0xffffff00013869c0 (tid 100055, pid 954, \"crash2: 0\")\r\nPending Threads:\r\n empty",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/389e9254-ab3a-4650-9f41-01ed6f4be2be.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=e954e8175d1eaa2e31b68440c2e320d490204778bc124314493e9cac94551fd3",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "23426b00-ec12-45a1-8020-76e0c6d185ca",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 8,
            "page_width": 794,
            "page_height": 595,
            "content": "8\r\nDDB “show lockchain”\r\ndb> show lockchain 100055\r\nthread 100055 (pid 954, crash2: 0) blocked on lock 0xffffffffae3c6fc0\r\n (sleep mutex) \"def\"\r\nthread 100142 (pid 954, crash2: 1) blocked on lock 0xffffffffae3c7000\r\n (sleep mutex) \"ghi\"\r\nthread 100143 (pid 954, crash2: 2) blocked on lock 0xffffffffae3c7040\r\n (sleep mutex) \"jkl\"\r\nthread 100144 (pid 954, crash2: 3) blocked on lock 0xffffffffae3c6f80\r\n (sleep mutex) \"abc\"\r\nthread 100055 (pid 954, crash2: 0) blocked on lock 0xffffffffae3c6fc0\r\n (sleep mutex) \"def\"\r\nthread 100142 (pid 954, crash2: 1) blocked on lock 0xffffffffae3c7000\r\n (sleep mutex) \"ghi\"\r\n...",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/23426b00-ec12-45a1-8020-76e0c6d185ca.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=60444ac8923da3dc29ee40e88ed9425cc85c0f366c5daabedb32c124ca05e77a",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "153ec832-1c7b-4679-9d85-24550ef82f11",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 9,
            "page_width": 794,
            "page_height": 595,
            "content": "9\r\nDDB “show sleepchain”\r\ndb> ps\r\n pid ppid pgrp uid state wmesg wchan cmd\r\n 811 0 0 0 SL (threaded) crash2\r\n100139 D fee 0xffffffffae3a9180 [crash2: 3]\r\n100138 D four 0xffffffffae3a9140 [crash2: 2]\r\n100137 D fo 0xffffffffae3a9240 [crash2: 1]\r\n100136 D two 0xffffffffae3a90c0 [crash2: 0]\r\n...\r\ndb> show lock fee\r\n class: lockmgr\r\n name: fee\r\n lock type: fee\r\n state: EXCL (count 1) 0xffffff00013079c0 (tid 100136, pid 811, \"crash2: 0\")\r\n waiters: 1\r\ndb> show sleepchain 100139\r\nthread 100139 (pid 811, crash2: 3) blocked on lk \"fee\" EXCL (count 1)\r\nthread 100136 (pid 811, crash2: 0) blocked on sx \"two\" XLOCK\r\nthread 100137 (pid 811, crash2: 1) blocked on lk \"fo\" EXCL (count 1)\r\nthread 100138 (pid 811, crash2: 2) blocked on sx \"four\" XLOCK\r\nthread 100139 (pid 811, crash2: 3) blocked on lk \"fee\" EXCL (count 1)\r\n...",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/153ec832-1c7b-4679-9d85-24550ef82f11.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=0ef9349bb682f62cefe7a0fa36c56b35b53bb06ab80f9bad2ec9a4688d65e56b",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "b491ac1d-36c8-46d7-89d0-06380e689b16",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 10,
            "page_width": 794,
            "page_height": 595,
            "content": "10\r\nAdding new DDB Commands\r\n● Declaring Commands\r\n● DDB Console I/O\r\n● Using DDB's Symbol Table",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/b491ac1d-36c8-46d7-89d0-06380e689b16.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=5fc7f77c9890c00ffc80f271b66c86f134716b0e98ccdcafc9b814ee37aaf500",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 501
      },
      {
        "segments": [
          {
            "segment_id": "4781764b-004d-4bdc-af34-77ff5c406f79",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 11,
            "page_width": 794,
            "page_height": 595,
            "content": "11\r\nDeclaring a DDB Command\r\n● DB_COMMAND()\r\n● Function Arguments\r\n– addr\r\n– have_addr\r\n– count\r\n– modif\r\nDB_COMMAND(foo, db_foo_cmd)\r\n{\r\nstruct foo *foop;\r\nint i;\r\nif (have_addr)\r\nfoop = (struct foo *)addr;\r\nelse\r\nfoop = &default_foo;\r\n/* Default count. */\r\nif (count == -1)\r\ncount = 1;\r\nfor (i = 0; i < count; i++)\r\ndo_something(foop);\r\n}",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/4781764b-004d-4bdc-af34-77ff5c406f79.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=afdd898bd57c31f564681751c7ec3bfb4bf5a3297fd9cfa92eb4281243e3e8fc",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "b4a6255f-761e-4f23-95a3-b955f5053e36",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 12,
            "page_width": 794,
            "page_height": 595,
            "content": "12\r\nDDB I/O\r\n● Use db_printf() \r\nInstead of printf()\r\n● Global Variable \r\ndb_pager_quit\r\n● Use \r\ndb_disable_pager() \r\nto Disable Pager\r\nDB_SHOW_COMMAND(foos, db_show_foos_cmd)\r\n{\r\nstruct foo *foop;\r\nint verbose;\r\nverbose = index(modif, 'v') != NULL;\r\nTAILQ_FOREACH(foop, &allfoos, f_list) {\r\nif (verbose)\r\ndb_printf(\"%p: \", foop);\r\ndb_printf(\"%s (%d)\\n\" foop->f_name,\r\n foop->f_count);\r\nif (db_pager_quit)\r\nbreak;\r\n}\r\n}",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/b4a6255f-761e-4f23-95a3-b955f5053e36.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=ce2f82afc7312e2e0b25f15988305e8fa3865b68e7c05becd7ad404e15a11fb7",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "9474a256-a373-4667-8485-583ee802bc2e",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 13,
            "page_width": 794,
            "page_height": 595,
            "content": "13\r\nUsing DDB's Symbol Tables\r\n● Use \r\ndb_search_symbol() \r\nto find the nearest \r\nsymbol to an \r\naddress.\r\n● Use \r\ndb_symbol_values() \r\nto get the name and \r\nvalue.\r\n#if defined(DDB)\r\nconst char *name;\r\nc_db_sym_t sym;\r\ndb_expr_t offset;\r\nsym = db_search_symbol(\r\n(vm_offset_t)(*sipp)->func,\r\nDB_STGY_PROC, &offset);\r\ndb_symbol_values(sym, &name,\r\nNULL);\r\nif (name != NULL)\r\nprintf(\" %s(%p)... \", name,\r\n(*sipp)->udata);\r\nelse\r\n#endif\r\nprintf(\" %p(%p)... \",\r\n(*sipp)->func,\r\n (*sipp)->udata);",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/9474a256-a373-4667-8485-583ee802bc2e.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=b4500ba567f4a0d551413da9e5a3b09fc2bbab2c23686604230607d91fdebde9",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "2669b83c-7e68-449e-a43c-7f2fbdf35d94",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 14,
            "page_width": 794,
            "page_height": 595,
            "content": "14\r\nkgdb\r\n● Debugging Kernel Modules\r\n● Extending kgdb with User-Defined \r\nCommands",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/2669b83c-7e68-449e-a43c-7f2fbdf35d94.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=e45999609ff1baf6eb78ecaaaf87c298d0f9061dd1e550436904f374b5b9d01c",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "6c2e11a8-e35d-4870-8686-e40ea04e55e1",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 15,
            "page_width": 794,
            "page_height": 595,
            "content": "15\r\nkgdb and Kernel Modules\r\n● Each module has to have symbols loaded \r\nindividually\r\n● kgdb's integrated kernel module support\r\n– “add-kld” command loads symbols for a single \r\nmodule\r\n– kgdb treats kernel modules as shared libraries\r\n● The asf(8) utility can be used with older kgdb \r\nbinaries or kernels without debug symbols",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/6c2e11a8-e35d-4870-8686-e40ea04e55e1.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=c73080f2e34d413511816e4394a716dc7e2426849e49a8f60911defaf0d1f0b3",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "8e2e1fa1-799d-406c-85c6-ba2bceafcc40",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 16,
            "page_width": 794,
            "page_height": 595,
            "content": "16\r\nkgdb's Integrated KLD Support\r\n> sudo kgdb -q\r\nLoaded symbols for /boot/kernel/iwi_bss.ko\r\nLoaded symbols for /boot/kernel/logo_saver.ko\r\n...\r\n(kgdb) info sharedlibrary\r\nFrom To Syms Read Shared Object Library\r\n0xc3e8e5a0 0xc3e8e63b Yes /boot/kernel/iwi_bss.ko\r\n0xc41037a0 0xc4103c28 Yes /boot/kernel/logo_saver.ko\r\n(kgdb) info files\r\nSymbols from \"/boot/kernel/kernel\".\r\nkernel core dump file:\r\n `/dev/mem', file type FreeBSD kernel vmcore.\r\nLocal exec file:\r\n `/boot/kernel/kernel', file type elf32-i386-freebsd.\r\n Entry point: 0xc04513c0\r\n ...\r\n 0xc3e8e5a0 - 0xc3e8e63b is .text in /boot/kernel/iwi_bss.ko\r\n 0xc3e8e63b - 0xc3e8e724 is .rodata in /boot/kernel/iwi_bss.ko\r\n 0xc3e8f000 - 0xc3ebdb04 is .data in /boot/kernel/iwi_bss.ko\r\n 0xc3ebdb04 - 0xc3ebdb7c is .dynamic in /boot/kernel/iwi_bss.ko\r\n 0xc3ebdb7c - 0xc3ebdb88 is .got in /boot/kernel/iwi_bss.ko\r\n 0xc3ebdb88 - 0xc3ebdb8c is .bss in /boot/kernel/iwi_bss.ko\r\n ...",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/8e2e1fa1-799d-406c-85c6-ba2bceafcc40.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=566873091f8ec07c9d41966d8bde72a5e7f52a78403f600eb162b52ab72e01cb",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "aaa3fecc-1eea-4e2a-b692-141a729439a6",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 17,
            "page_width": 794,
            "page_height": 595,
            "content": "17\r\nkgdb Scripting Gotchas\r\n● Limited control flow\r\n● Arguments\r\n– No argument count\r\n– Not local variables with local scope\r\n● String literals\r\n● No way to abort execution of a user-defined \r\ncommand",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/aaa3fecc-1eea-4e2a-b692-141a729439a6.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=df78092539b735d80a140e4064a0a2d104b44727b8281ae37c7b5129504c3a45",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "0f4fad76-f76e-4d7f-9113-cc2f0ca5bd9b",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 18,
            "page_width": 794,
            "page_height": 595,
            "content": "18\r\nDebugging Strategies\r\n● Kernel Crash\r\n– page fault: corrupt data structure\r\n– kmem_map: possible resource exhaustion\r\n– Check for bad hardware for “weird” panics\r\n● System Hangs\r\n– Check console messages; resource exhaustion?\r\n– Use DDB to inspect system state; “ps”, etc.\r\n– Get a crash dump for offline analysis",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/0f4fad76-f76e-4d7f-9113-cc2f0ca5bd9b.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=7dc731e1ea22d345383a327ce0cd1ac7b157d7cae03f038c6fb2d9097b2420bf",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "3c62b894-2f4a-43f8-84bd-f90b922988f3",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 19,
            "page_width": 794,
            "page_height": 595,
            "content": "19\r\nQ&A\r\n● Paper and slides are available online\r\n– http://www.FreeBSD.org/~jhb/papers/bsdcan/2008/\r\n● Some kgdb scripts for 4.x and 6.x are also \r\navailable\r\n– http://www.FreeBSD.org/~jhb/gdb/\r\n● Questions?",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/3c62b894-2f4a-43f8-84bd-f90b922988f3.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=f8cff87a80f0f0336a4d8efa30ea614bc6070d5640fbe15de49eb90bb412a75d",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "b6870bc7-5584-4200-845b-e10267396c7c",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 20,
            "page_width": 794,
            "page_height": 595,
            "content": "20\r\nKernel Crash Messages\r\n● Panic String\r\n– Simple Description\r\n– grep'able\r\n● Memory Access Fault\r\n– Faulting Address\r\n– Program Counter\r\n– Current Process",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/b6870bc7-5584-4200-845b-e10267396c7c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=761a058b0a7b9ece6cf02ad652bcc773f0c7770b8d42a784d7ac2ce7e06674f0",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 475
      },
      {
        "segments": [
          {
            "segment_id": "d5b002a2-efcb-4891-8675-a7102a022b36",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 21,
            "page_width": 794,
            "page_height": 595,
            "content": "21\r\nSample amd64 Page Fault\r\nFatal trap 12: page fault while in kernel mode\r\ncpuid = 0; apic id = 00\r\nfault virtual address = 0x4\r\nfault code = supervisor read, page not present\r\ninstruction pointer = 0x8:0xffffffff80359af8\r\nstack pointer = 0x10:0xffffffffa3cbb550\r\nframe pointer = 0x10:0xffffffffa3cbb570\r\ncode segment = base 0x0, limit 0xfffff, type 0x1b\r\n = DPL 0, pres 1, long 1, def32 0, gran 1\r\nprocessor eflags = interrupt enabled, resume, IOPL = 0\r\ncurrent process = 31466 (netstat)\r\ntrap number = 12\r\npanic: page fault",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/d5b002a2-efcb-4891-8675-a7102a022b36.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=912f086e8e10dbfe38d1403ca775597b20195c5e9ad3bd452e55b396f8e55fdd",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "94e953cc-5465-4e98-beaf-97e1d6a41798",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 22,
            "page_width": 794,
            "page_height": 595,
            "content": "22\r\nDDB “show proc” and “show \r\nthread”\r\ndb> show proc 954\r\nProcess 954 (crash2) at 0xffffff0001354000:\r\n state: NORMAL\r\n uid: 0 gids: 0\r\n parent: pid 0 at 0xffffffff806538e0\r\n ABI: null\r\n threads: 4\r\n100144 L *abc 0xffffff0001288dc0 [crash2: 3]\r\n100143 L *jkl 0xffffff0001288c80 [crash2: 2]\r\n100142 L *ghi 0xffffff0001288be0 [crash2: 1]\r\n100055 L *def 0xffffff0001288d20 [crash2: 0]\r\ndb> show thread 100055\r\nThread 100055 at 0xffffff00013869c0:\r\n proc (pid 954): 0xffffff0001354000\r\n name: crash2: 0\r\n stack: 0xffffffffae213000-0xffffffffae216fff\r\n flags: 0x4 pflags: 0x200000\r\n state: INHIBITED: {LOCK}\r\n lock: def turnstile: 0xffffff0001288d20\r\n priority: 224",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/94e953cc-5465-4e98-beaf-97e1d6a41798.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=55466f2074d3c5dd0b414e4b01501b058d349552326b8bb734b9f4f146e1dea1",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "9c58d4d0-1810-4cb0-ae2d-9a722173599e",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 23,
            "page_width": 794,
            "page_height": 595,
            "content": "23\r\nDDB “show lock” and “show \r\nturnstile”\r\ndb> show lock def\r\n class: sleep mutex\r\n name: def\r\n flags: {DEF}\r\n state: {OWNED, CONTESTED}\r\n owner: 0xffffff000155c680 (tid 100142, pid 954, \"crash2: 1\")\r\ndb> show turnstile def\r\nLock: 0xffffffffae3c6fc0 - (sleep mutex) def\r\nLock Owner: 0xffffff000155c680 (tid 100142, pid 954, \"crash2: 1\")\r\nShared Waiters:\r\n empty\r\nExclusive Waiters:\r\n 0xffffff00013869c0 (tid 100055, pid 954, \"crash2: 0\")\r\nPending Threads:\r\n empty",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/9c58d4d0-1810-4cb0-ae2d-9a722173599e.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=2c75b4932943a83ca8b62c38e46d839087d59f89040315cd386eb7f350efdfd1",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "9867bf9b-858a-4a79-a5f5-a793d6c04972",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 24,
            "page_width": 794,
            "page_height": 595,
            "content": "24\r\nThreads and Processes in kgdb\r\n● kgdb maps each kernel thread to a GDB \r\nthread\r\n● The “info threads” and “thread” commands \r\nwork just as in GDB\r\n● kgdb adds “proc” and “tid” commands which \r\naccept kernel PIDs and TIDs",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/9867bf9b-858a-4a79-a5f5-a793d6c04972.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=7fee9f154956cceecc5fb9eda6a0ad061f43200acb872ba433b625df05fe80bf",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "8bc1a16a-3ce5-4f0a-ae87-54aebb6551f4",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 25,
            "page_width": 794,
            "page_height": 595,
            "content": "25\r\nExamining Crash Dumps with \r\nSystem Utilities\r\n● Several system utilities can use libkvm(3) to \r\nanalyze crash dumps\r\n● Use -M and -N arguments to specify kernel \r\nand vmcore\r\n● ps(1), netstat(1), vmstat(8), etc.",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/8bc1a16a-3ce5-4f0a-ae87-54aebb6551f4.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=92bab1f6f49348228e9d9846b66c0e3641936d4d303565194e2b17658c408963",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "dd42b1d0-24e1-485b-ac3c-833e94b20a5c",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 26,
            "page_width": 794,
            "page_height": 595,
            "content": "26\r\nConclusion",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/cc6154e5-49d0-46e6-979c-f11fe1373316/images/dd42b1d0-24e1-485b-ac3c-833e94b20a5c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041827Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=9211bb4c457df9ecbe16cccf1bd394c51db5502d21edc8e3897551e24da09d65",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 312
      }
    ],
    "extracted_json": {
      "title": "Document Metadata",
      "schema_type": "object",
      "extracted_fields": [
        {
          "name": "title",
          "field_type": "string",
          "value": "```json\n{\"title\": \"Introduction to Debugging the FreeBSD Kernel\"}\n```"
        },
        {
          "name": "author",
          "field_type": "string",
          "value": "John Baldwin\n"
        },
        {
          "name": "date_published",
          "field_type": "string",
          "value": "\"May 17, 2008\"\n"
        },
        {
          "name": "location",
          "field_type": "string",
          "value": "FreeBSD\n"
        }
      ]
    }
  }
}