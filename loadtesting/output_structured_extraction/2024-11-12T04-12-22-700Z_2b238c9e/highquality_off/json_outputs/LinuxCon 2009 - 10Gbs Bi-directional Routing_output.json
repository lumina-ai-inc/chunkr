{
  "file_name": "LinuxCon 2009 - 10Gbs Bi-directional Routing.pdf",
  "task_id": "6c84d8d0-69e2-49c3-a23a-61530affdb6f",
  "output": {
    "chunks": [
      {
        "segments": [
          {
            "segment_id": "eae4b717-dfbd-4109-b407-53ca2e7933d9",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 1,
            "page_width": 794,
            "page_height": 595,
            "content": "10Gbit/s Bi-Directional Routing\r\non standard hardware\r\nrunning Linux\r\nby\r\nJesper Dangaard Brouer <hawk@comx.dk>\r\nMaster of Computer Science\r\nLinux Kernel Developer\r\nComX Networks A/S\r\nLinuxCon 2009\r\nd.23/9-2009\r\nComX Networks A/S",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/eae4b717-dfbd-4109-b407-53ca2e7933d9.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=b0421cc274d8a8c308b89e726288344bcffb2c3813fe484bc88cd435d310a341",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "a114de7e-f111-4ca6-86f3-4810b93a8607",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 2,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 2/36\r\nWho am I\r\n● Name: Jesper Dangaard Brouer\r\n– Edu: Computer Science for Uni. Copenhagen\r\n● Focus on Network, Dist. sys and OS\r\n– Linux user since 1996, professional since 1998\r\n● Sysadm, Developer, Embedded\r\n– OpenSource projects\r\n● Author of\r\n– ADSL-optimizer\r\n– CPAN IPTables::libiptc\r\n● Patches accepted into\r\n– Kernel, iproute2, iptables and wireshark",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/a114de7e-f111-4ca6-86f3-4810b93a8607.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=67d8ba6296f98737690f21e81e7fbee844ab80a0c4728925b42f2688f97178ff",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "3f7bde0f-048a-4ba3-93a9-97576329f723",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 3,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 3/36\r\nPresentation overview\r\n● When you leave this presentation, you will know:\r\n– The Linux Network stack scales with the number of CPUs\r\n– About PCI-express overhead and bandwidth\r\n– Know what hardware to choose\r\n– If its possible to do 10Gbit/s bidirectional routing on Linux?\r\nHow many think is possible to do:\r\n10Gbit/s bidirectional routing on Linux?",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/3f7bde0f-048a-4ba3-93a9-97576329f723.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=41083db0b53a44915c4c13755859241862425d6e0a187d56f9776c3a7cc80e1c",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "65945859-cfd5-4670-918e-cb4692aedfc2",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 4,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 4/36\r\nComX Networks A/S\r\n● I work for ComX Networks A/S\r\n– Danish Fiber Broadband Provider (TV, IPTV, VoIP, Internet)\r\n● This talk is about\r\n– our experiments with 10GbE routing on Linux.\r\n● Our motivation:\r\n– Primary budget/money (in these finance crisis times)\r\n● Linux solution: factor 10 cheaper! \r\n– (60K USD -> 6K USD)\r\n– Need to upgrade capacity in backbone edges\r\n– Personal: Annoyed with bug on Foundry and tech support ",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/65945859-cfd5-4670-918e-cb4692aedfc2.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=1f178b62c64584b5e111c70789d29d33d6f42b9a5ad8b5361c93967dc575a29c",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "3c79462d-aebb-44b8-af55-4ceef5c86185",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 5,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 5/36\r\nPerformance Target\r\n● Usage \"normal\" Internet router\r\n– 2 port 10 Gbit/s router\r\n● Bidirectional traffic\r\n● Implying: \r\n– 40Gbit/s through the interfaces (5000 MB/s)\r\n– Internet packet size distribution\r\n● No jumbo frame \"cheats\"\r\n● Not only max MTU (1500 bytes)\r\n– Stability and robustness\r\n● Must survive DoS attack with small packet",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/3c79462d-aebb-44b8-af55-4ceef5c86185.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=759507522be70c101cfa8962fa55dbf27757bc9f5372fc2f122ea6ce5878851f",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "de7da466-8d35-43cd-9bd9-260e1bc3174b",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 6,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 6/36\r\nCompete: 10Gbit/s routing level\r\n● Enabling hardware factors\r\n– PCI-express: Is a key enabling factor!\r\n● Giving us enormous “backplane” capacity\r\n● PCIe x16 gen.2 marketing numbers 160 Gbit/s\r\n– one-way 80Gbit/s → encoding 64Gbit/s → overhead ~54 Gbit/s\r\n– Scaling: NICs with multiple RX/TX queues in hardware\r\n● Makes us scale beyond one CPU\r\n● Large effort in software network stack (thanks DaveM!)\r\n– Memory bandwidth\r\n● Target 40Gbit/s → 5000 MBytes/s",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/de7da466-8d35-43cd-9bd9-260e1bc3174b.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=54775c90754b72bbe97ef68be45bc03e20459d5b8a6f41c4d0dbab5ed0ba8a93",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "8c91dfba-39bc-47b0-b824-c7922cc7ad2e",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 7,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 7/36\r\nPCI-express: Overhead\r\n● Encoding overhead: 20% (8b/10b encoding)\r\n– PCIe gen 1. 2.5Gbit/s per lane → 2 Gbit/s\r\n● Generation 1 vs. gen.2: \r\n– Double bandwidth, 2 Gbit/s → 4 Gbit/s\r\n● Protocol overhead: Packet based\r\n– Overhead per packet: 20 Bytes (32-bit), 24 bytes (64-bit)\r\n– MaxPayload 128 bytes => 16 % additional overhead\r\n● PCIe x8 = 32 Gbit/s\r\n● MaxPayload 128 bytes => 26.88 Gbit/s\r\n● Details see: http://download.intel.com/design/intarch/papers/321071.pdf\r\nTitle: “Hardware Level IO Benchmarking of PCI express*”",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/8c91dfba-39bc-47b0-b824-c7922cc7ad2e.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=87d3baa07d84c1138bef343616dbbc6c861390fb28c1f9bacb47514ac841bd2f",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 452
      },
      {
        "segments": [
          {
            "segment_id": "493476f1-75fa-491b-a9d2-1f5a52b730bc",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 8,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 8/36\r\nHardware: Device Under Test (DUT)\r\n● Starting with cheap gaming style hardware\r\n– No budget, skeptics in the company\r\n– CPUs: Core i7 (920) vs. Phenom II X4 (940)\r\n– RAM: DDR3 vs DDR2\r\n● Several PCI-express slots Generation 2.0\r\n– Motherboards\r\n● Core i7 – Chipset X58: Asus P6T6 WS Revolution\r\n● AMD – Chipset 790GX: Gigabyte MA790GP-DS4H\r\nWhat can we expect from this hardware...",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/493476f1-75fa-491b-a9d2-1f5a52b730bc.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=7e725d21b7fad6a876bc414a44957588445d9e68069a3e1cda901e68598ae860",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "d5f5b164-867d-4837-a430-e230e26e83be",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 9,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 9/36\r\nDUT: Memory Bandwidth\r\n● Raw memory bandwidth enough?\r\n– Memory types: DDR2: Phenom II / DDR3: Core i7\r\n● Target 5000 MBytes/s (40Gbit/s) (2500 MB/s write and 2500MB/s reads)\r\n– HW should be capable of doing several 10GbE\r\nDDR2 1066MHz DDR3 1066MHz DDR3 1333MHz DDR3 1600MHz\r\n0\r\n2000\r\n4000\r\n6000\r\n8000\r\n10000\r\n12000\r\n14000\r\n16000\r\n0\r\n0.1\r\n0.2\r\n0.3\r\n0.4\r\n0.5\r\n0.6\r\n0.7\r\n0.8\r\n0.9\r\n1\r\nMemory bandwidth (lmbench: bw_mem)\r\nRead\r\nWrite\r\nNeeded\r\nMBytes/sec",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/d5f5b164-867d-4837-a430-e230e26e83be.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=d4dfb8cabc7cdda7bb952f24b011dd5d98745239eb4b442e335635020aa7ce78",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "f4685d32-6f65-4d66-82ef-e9b35b79520b",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 10,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 10/36\r\n10Gbit/s Network Interface Cards\r\n● Network Interface Cards (NICs) under test:\r\n– Sun Neptune (niu): 10GbE Dual port NIC PCIe x8 gen.1 (XFP)\r\n● PCIe x8 = 16Gbit/s (overhead 16% = 13.44 Gbit/s)\r\n– SMC Networks (sfc): 10GbE NIC, Solarflare chip (XFP)\r\n● hardware queue issues, not default enabled\r\n● only one TX queue, thus cannot parallelize \r\n– Intel (ixgbe): newest Intel 82599 chip NIC\r\n● Fastest 10GbE NIC I have ever seen!!!\r\n● Engineering samples from:\r\n– Intel: Dual port SFP+ based NIC (PCIe x8 Gen.2)\r\n– Hotlava Systems Inc.: 6 port SFP+ based NIC (PCIe x16 Gen.2)",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/f4685d32-6f65-4d66-82ef-e9b35b79520b.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=4b41c2568deb144c2c2c709fb9e9a93b0146d01fdb8c7d5451abb90dad962ae2",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "8c663044-6675-497b-9384-0a085f499c90",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 11,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 11/36\r\nPreliminary: Bulk throughput\r\n● Establish: enough PCIe and Memory bandwidth?\r\n– Target: 2 port 10GbE bidir routing\r\n● collective 40Gbit/s\r\n– with packet size 1500 bytes (MTU)\r\nAnswer: Yes, but only with special hardware:\r\nCPU Core i7\r\nIntel 82599 based NIC\r\nDDR3 Memory minimum at 1333 MHz\r\nQuickPath Interconnect (QPI) tuned to 6.4GT/s (default 4.8GT/s)",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/8c663044-6675-497b-9384-0a085f499c90.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=e203827a3773fb1d410206d9a1e00a1688150c7124782af66678977f25bbe099",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "caf4ae5c-37e1-480b-91f7-defbbc856ef0",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 12,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 12/36\r\nObservations: AMD: Phenom II\r\n● AMD Phenom(tm) II X4 940 (AM2+)\r\n– Can do 10Gbit/s one-way routing\r\n– Cannot do bidirectional 10Gbit/s\r\n● Memory bandwidth should be enough\r\n– Write 20Gbit/s and Read 20Gbit/s (2500MB/s)\r\n● 1800 Mhz HyperTransport seems too slow\r\n– HT 1800Mhz ~ bandwidth 57.6 Gbit/s\r\n– \"Under-clocking\" HT: performance followed\r\n– Theory: Latency issue\r\n● PCIe to memory latency too high, outstanding packets",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/caf4ae5c-37e1-480b-91f7-defbbc856ef0.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=3f5759e4f7fdd34d5137e0e364c043ae4f21517bf51b27baf568e0f60392e957",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "5871f24f-23e7-4979-a458-7ff7e01518a3",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 13,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 13/36\r\nScaling with the number of CPUs\r\n● To achieve these results\r\n– distribute the load across CPUs\r\n– A single CPU cannot handle 10GbE\r\n● Enabling factor: “multiqueue”\r\n– NICs with multiple hardware RX/TX queues\r\n– Seperate IRQ per queue (both RX and TX)\r\n● Lots of IRQs used\r\n– look in /proc/interrupts eg. ethX-rx-2",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/5871f24f-23e7-4979-a458-7ff7e01518a3.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=0c761eab71b4ba6e535486648b52809a8e6c512daadb5c31e56f5e654e90c642",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "4e5c0c01-256a-4d75-8adc-c1de1cd1e715",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 14,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 14/36\r\nLinux Multiqueue Networking\r\n● RX path: NIC computes hash\r\n– Also known as RSS (Receive-Side Scaling)\r\n– Bind flows to queue, avoid out-of-order packets\r\n● Large effort in software network stack\r\n– TX qdisc API \"hack\", backward compatible\r\n● http://vger.kernel.org/~davem/davem_nyc09.pdf\r\n– Beware: Bandwidth shapers break CPU scaling!\r\nLinux Network stack scales with the number of CPUs",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/4e5c0c01-256a-4d75-8adc-c1de1cd1e715.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=23439a610204e9ee9c6979846a8c1c17d5310b7bf387ac72ce2e50d4014bf6d2",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 507
      },
      {
        "segments": [
          {
            "segment_id": "9debdd76-d377-47a4-850e-64c0b894d776",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 15,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 15/36\r\nPractical: Assign HW queue to CPUs\r\n● Each HW (RX or TX) queue has individual IRQ\r\n– Look in /proc/interrupts\r\n– A naming scheme: ethXX-rx-0\r\n● Assign via \"smp_affinity\" mask\r\n– In /proc/irq/nn/smp_affinity\r\n– Trick: /proc/irq/*/eth31­rx­0/../smp_affinity\r\n– Trick: \"grep . /proc/irq/*/eth31­*x­*/../smp_affinity\"\r\n● Use tool: 'mpstat ­A ­P ALL'\r\n– see if the interrupts are equally shared across CPUs",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/9debdd76-d377-47a4-850e-64c0b894d776.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=caae074fe8d317f2cc34a155eaf860dad72cdd6801a31212b4b3b110888ae7e2",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "fe760aeb-dd52-44cf-ad57-8077fcd16295",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 16,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 16/36\r\nBinding RX to TX: Stay on same CPU\r\n● RX to TX queue mapping: tied to the same CPU\r\n– Avoid/minimize cache misses, consider NUMA\r\n● 3 use-cases for staying on the same CPU:\r\n– Forwarding (main focus) (RX to TX other NIC)\r\n● How: Record queue number at RX and use it at TX\r\n● Kernel 2.6.30 for proper RX to TX mapping\r\n– Server (RX to TX)\r\n● Caching of socket info (Credit to: Eric Dumazet)\r\n– Client (TX to RX)\r\n● Hard, Flow \"director\" in 10GbE Intel 82599 NIC",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/fe760aeb-dd52-44cf-ad57-8077fcd16295.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=17f42fc9d82d2f3c26e258909aa986157bdedfbbb1341a039d18eb7e39d83375",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "d47e05c4-f9a8-455b-aa95-d75fae632159",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 17,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 17/36\r\nStart on results\r\n● Lets start to look at the results...\r\n– Have revealed\r\n● Large frames: 10GbE bidirectional was possible!\r\n● What about smaller frames? (you should ask...)\r\n– First need to look at:\r\n● Equipment\r\n● Tuning\r\n● NICs and wiring",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/d47e05c4-f9a8-455b-aa95-d75fae632159.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=b8f6cfb6ffa974ea84503d72e2cb831b0dd68dbbcbbef641ab8c036f55c004c6",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "d8b58d0a-6de0-4bf7-9e96-9b22765a7861",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 18,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 18/36\r\nTest setup: Equipment\r\n● Router: Core i7 920 (default 2.66 GHz)\r\n– RAM: DDR3 (PC3-12800) 1600MHz X.M.P settings\r\n● Patriot: DDR3 Viper Series Tri-Channel\r\n– Low Latency CAS 8-8-8-24\r\n– QPI at 6.4 GT/s (due to X.M.P)\r\n● Generator#1: AMD Phenom 9950 quad\r\n● Generator#2: AMD Phenom II X4 940",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/d8b58d0a-6de0-4bf7-9e96-9b22765a7861.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=fb94c74d6209eff67bbf8ff2aa49cdb79fa3522e9b378ed02bcbae1eb67e7d52",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "da594ac5-d14a-4a98-b72b-c1bdcaeeef49",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 19,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 19/36\r\nTest setup: Tuning\r\n● Binding RX to TX queues\r\n● Intel NIC tuning\r\n– Adjust interrupt mitigation parameters rx­usecs to 512\r\n● Avoiding interrupt storms (at small packet sizes)\r\n– 'ethtool -C eth31 rx-usecs 512'\r\n– Ethernet flow control (pause frames)\r\n● Turn-off during tests:\r\n– To see effects of overloading the system\r\n– 'ethtool -A eth31 rx off tx off'\r\n● Recommend turning on for production usage",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/da594ac5-d14a-4a98-b72b-c1bdcaeeef49.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=544b5b1fa269dcb8f9d63460e93bb8d6d35f6f2c00d2da0578cae67688a6775b",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "91d063ad-e54b-40d4-8a3b-b479ed53a37a",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 20,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 20/36\r\nNIC test setup #1\r\n● Router\r\n– Equipped with: Intel 82599 Dual port NICs\r\n– Kernel: 2.6.31-rc1 (net-next-2.6 tree 8e321c4)\r\n● Generators\r\n– Equipped with NICs connected to router\r\n● Sun Neptune (niu)\r\n● SMC (10GPCIe-XFP) solarflare (sfc)\r\n– Using: pktgen\r\n● UDP packets\r\n● Randomize dst port number – utilize multiple RX queue",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/91d063ad-e54b-40d4-8a3b-b479ed53a37a.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=4d965fe8540733b7e499a1d52969dfeb9467ccc739126651f6fd278a915f341a",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "962def9a-3ca3-4cf6-9a46-993cfe6cb07b",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 21,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 21/36\r\nSetup #1: 10GbE uni-directional\r\n● Be skeptic\r\n– Packet generator\r\n● Too slow!\r\n● Sun NICs",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/962def9a-3ca3-4cf6-9a46-993cfe6cb07b.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=9aa2c5022565c80b9f80ba5b18d038036e94eb9c47899b517705adedbc4b2e17",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "91890b7c-762c-4b58-8832-b7dfa77e3ab0",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 22,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 22/36\r\nSetup #1: Packet Per Sec\r\n● Be skeptic\r\n– Packet generator\r\n● Too slow!\r\n● Sun NICs\r\n● PPS limit",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/91890b7c-762c-4b58-8832-b7dfa77e3ab0.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=4c85ee48dee47697c5cf5d2d6c9f71e320849a91f60ed7d31d6040498fed73c8",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "e5a43ed6-ed66-4dc0-9e78-bf6559f708b6",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 23,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 23/36\r\nNIC test setup #2\r\n● Router and Generators\r\n– All equipped with:\r\n● Intel 82599 based NICs\r\n● Pktgen limits\r\n– Sun NICs max at 2.5 Mpps\r\n– Intel 82599 NIC (at packet size 64 byte)\r\n● 8.4 Mpps with AMD CPU\r\n● 11 Mpps with Core i7 CPU as generator",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/e5a43ed6-ed66-4dc0-9e78-bf6559f708b6.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=500084eef4d95511e461a9391d9e2b69e4e0fad0eb3b1ea55c638e42f42d2c92",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 497
      },
      {
        "segments": [
          {
            "segment_id": "5bbaf30b-e105-43ae-9860-cf84a4b21f89",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 24,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 24/36\r\nSetup #2: 10GbE uni-dir throughput\r\n● Wirespeed 10GbE\r\n– uni-dir routing\r\n– pktsize 420",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/5bbaf30b-e105-43ae-9860-cf84a4b21f89.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=30134571fe6d04ed807f4cba95c20651cd296a67c9174bead5dd54d2c302975c",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "ac911ce3-cbc7-4442-9d8f-ed0570ed150c",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 25,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 25/36\r\nSetup #2: 10GbE uni-dir PPS\r\n● Limits\r\n– Packet Per Sec\r\n– 3.5 Mpps\r\n● at 64bytes",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/ac911ce3-cbc7-4442-9d8f-ed0570ed150c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=cdbf24fe8b65c8fa58c069f98fa19688f6bae4d443a501c51ca8935b3123200e",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "6d6123c4-1a6b-4fed-8e4a-526bebe1b677",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 26,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 26/36\r\n10GbE Bi-directional routing\r\n● Wirespeed at\r\n– 1514 and 1408\r\n– 1280 almost\r\n● Fast generators\r\n– can survive load!",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/6d6123c4-1a6b-4fed-8e4a-526bebe1b677.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=f8f3ef7c59d43b0fac4269bfccbd7d806385e26d92c55ef24a515e9ee713ce95",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "8877cfea-4fd3-4426-9aec-b0f8253e4d56",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 27,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 27/36\r\n10GbE Bi-dir: Packets Per Sec\r\n● Limited\r\n– by PPS rate\r\n– Max at\r\n● 3.8 Mpps",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/8877cfea-4fd3-4426-9aec-b0f8253e4d56.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=ccc4f2df44c48b92f2037ae6380c4b421521a6c37ee3bd7acabdf08861c18209",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "9b433877-057e-4b1f-b278-6245fc8d0332",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 28,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 28/36\r\n● Target: Internet router\r\n– Simulate Internet traffic with pktgen\r\n● Based on Robert Olssons Article:\r\n– \"Open-source routing at 10Gb/s\"\r\n– Packet size distribution\r\n– Large number of flows\r\n● 8192 flows, duration 30 pkts, destinations /8 prefix (16M)\r\n● watch out for: \r\n– slow-path route lookups/sec\r\n– size of route cache\r\nSimulate: Internet traffic pattern\r\npktsize distribution approximate\r\n64 45.00% 50.00%\r\n576 25.00% 25.00%\r\n1514 30.00% 25.00%\r\navg. size 627 bytes 554 bytes",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/9b433877-057e-4b1f-b278-6245fc8d0332.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=a0786b42c1c5c830d86e0466c4b691ff3007d8491df3ac6ef941883bebb097b1",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "bde5a6b6-9c39-48f1-be50-e77cf5413440",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 29,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 29/36\r\nUni-dir: Internet traffic pattern\r\n● Simulate Internet Traffic\r\n– 10GbE uni-directional\r\n● Route Cache is scaling\r\n– 900k entries in route cache\r\n– very little performance impact\r\n– almost same as const size packet forwarding\r\nGbit/s Mpps\r\nGenerator 9.5 2.17\r\nRX-router 9.4 2.14\r\nTX-router 9.4 2.14\r\nNew route lookups/s: 68k/sec",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/bde5a6b6-9c39-48f1-be50-e77cf5413440.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=769b6fc7317f1dad6696faffb41ec1cd98a2583e318c9242c551128c66c10b38",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "1e373590-20a2-4125-a754-38dcf8dab5fb",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 30,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 30/36\r\nBi-Dir: Internet traffic pattern\r\n● 10GbE bi-directional\r\n– Strange: Average packet size in test\r\n● Generators: 554 bytes vs. Receive size: 423 bytes\r\n– Route Cache seems to scale (1.2M entries)\r\n● when comparing to const size packet tests\r\nGbit/s Mpps avg. pkt\r\nGenerator 19.0 Gbit/s 4.3 554\r\nRX 11.6 Gbit/s 3.4 423\r\nTX 11.6 Gbit/s 3.4 423\r\nNew route lookups/s: 140k/sec\r\nComparing with constant size packet tests\r\nSize 423 11.4 Gbit/s 3.3 423\r\nSize 554 15.6 Gbit/s 3.5 554",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/1e373590-20a2-4125-a754-38dcf8dab5fb.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=921fc994fc62cc4b5b20342a06eca8c93ed4ee77ec2734ee74c95b15cc466e99",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "dc76966e-88f1-4014-8447-9ca8822b03eb",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 31,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 31/36\r\nSummary: Target goal reached?\r\n● 2 port 10GbE “Internet” router\r\n– Uni-Dir: Very impressive, Wirespeed with small pkts\r\n– Bi-dir: Wirespeed for 3 largest packet sizes\r\n● Good curve, no choking\r\n● Bandwidth: Well within our expected traffic load\r\n– Internet type traffic\r\n● Uni-dir: Impressive\r\n● Bi-dir: Follow pkt size graph, route cache scales\r\n– Traffic Overloading / semi-DoS\r\n● Nice graphs, doesn't choke with small pkts\r\nYes! - It is possible to do:\r\n10Gbit/s bidirectional routing on Linux",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/dc76966e-88f1-4014-8447-9ca8822b03eb.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=fe81a3fe4bd29f07ddb15b6b1539d8c37cd6af509fbf4c2417ae838c58862567",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "848bb51b-aa53-4a77-ad0e-e31f1957ac69",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 32,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 32/36\r\n● Beyond 20GbE\r\n– Pktsize: 1514\r\n● Tx: 31.2 Gb/s\r\n● Rx: 31.9 Gb/s\r\n– Enough mem bandwidth\r\n– > 2x 10GbE bidir\r\n– Real limit: PPS\r\nBandwidth for 4 x 10GbE bidir ?",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/848bb51b-aa53-4a77-ad0e-e31f1957ac69.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=f3a03edefa2ba5c1d8b222fe366721864b36c3ec3ba91d093cab5e45e1f09733",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "afa19669-e160-4601-b521-fbe882491f26",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 33,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 33/36\r\n4 x 10GbE bidir: Packets Per Sec\r\n● Real limit\r\n– PPS limits",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/afa19669-e160-4601-b521-fbe882491f26.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=e71a1bb28b2432ffd62f22672fe32eb8f46d28e1f9b59406bac8a02a005d119e",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "1537226a-ba61-47c5-8a5b-002e052aba2c",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 34,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 34/36\r\nSummary: Lessons learned\r\n● Linux Network stack scales\r\n– “multiqueue” framework works!\r\n● Hardware\r\n– Choosing the right hardware essential\r\n● PCI-express latency is important\r\n– Choose the right chipset\r\n– Watch out for interconnecting of PCIe switches\r\n● Packets Per Second\r\n– is the real limit, not bandwidth",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/1537226a-ba61-47c5-8a5b-002e052aba2c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=cd054e4d7fcf3ad9d45a5a5f0e81d3ba24b12f509f338acbfc388c010addee8c",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 504
      },
      {
        "segments": [
          {
            "segment_id": "9d4e8e61-bb64-4394-82c6-4e76285e3506",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 35,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 35/36\r\nFuture\r\n● Buy server grade hardware\r\n– CPU Core i7 → Xeon 55xx\r\n● Need min Xeon 5550 (QPI 6.4GT/s, RAM 1333Mhz)\r\n● Two physical CPUs, NUMA challenges\r\n● Smarter usage of HW queues\r\n– Assure QoS by assigning Real-time traffic to HW queue\r\n● ComX example: IPTV multicast streaming\r\n● Features affecting performance?\r\n● Title: “How Fast Is Linux Networking”\r\n– Stephen Hemminger, Vyatta\r\n● Japan Linux Symposium, Tokyo (22/10-2009)",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/9d4e8e61-bb64-4394-82c6-4e76285e3506.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=7e364f6dd875450efb41ba31853e31df1a9b3c8da3e2161a494b29bf925a91d2",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "10abd15b-c807-45c3-9e49-15d4d0eea95c",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 36,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 36/36\r\nThe End\r\nThanks!\r\nEngineering samples:\r\nIntel Corporation\r\nHotlava Systems Inc.\r\nSMC Networks Inc.\r\nFamous Top Linux Kernel Comitter\r\nDavid S. Miller",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/10abd15b-c807-45c3-9e49-15d4d0eea95c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=2a0cd80c0e1d26ae91a4e07fc03f36e43c6db4a91085c9836b1cbf811727b78a",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "4b8bffeb-6f2b-4c5a-a5b2-1209bb5a70bf",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 37,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 37/36\r\n10G optics too expensive!\r\n● 10GbE SFP+ and XFP optics very expensive\r\n– There is a cheaper alternative!\r\n– Direct Attached Cables\r\n● SFP+ LR optics price: 450 USD (need two)\r\n● SFP+ Copper cable price: 40 USD\r\n– Tested cable from:\r\n● Methode dataMate\r\n– http://www.methodedatamate.com",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/4b8bffeb-6f2b-4c5a-a5b2-1209bb5a70bf.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=2cd73ae2dacfad8b4c3b0c1284890525e793f5a13899cd913d57d3ce1d94ec48",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "06b58ab0-fa41-4571-b211-38432e72bbec",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 38,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 38/36\r\nPitfalls: Bad motherboard PCIe design \r\n● Reason: Could not get beyond 2x 10GbE\r\n● Motherboard: Asus P6T6 WS revolution\r\n– Two PCIe switches\r\n● X58 plus NVIDIA's NF200\r\n● NF200 connected via PCIe gen.1 x16\r\n– 32 Gbit/s -> overhead 26.88 Gbit/s\r\n– Avoid using the NF200 slots\r\n● scaling again...",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/06b58ab0-fa41-4571-b211-38432e72bbec.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=c5e64bde27fb829c55ac499c3a2e6609a4d4ab5d3ce05f48f0d49805022a6810",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "79dae1a6-3b14-40af-a2ba-c02e5dc55f91",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 39,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 39/36\r\nChipset X58: Core i7\r\n● Bloomfield, Nehalem\r\n● Socket: LGA-1366",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/79dae1a6-3b14-40af-a2ba-c02e5dc55f91.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=bd51930d17650e5f6347494e2d350107a2fb7bd69a41f89d45de5c1ceeaf9417",
            "html": null,
            "markdown": null
          },
          {
            "segment_id": "46ec4a0f-798f-4ca4-8c91-962b43dd3c06",
            "bbox": {
              "left": 0,
              "top": 0,
              "width": 794,
              "height": 595
            },
            "page_number": 40,
            "page_width": 794,
            "page_height": 595,
            "content": "Linux: 10Gbit/s Bi-directional Routing 40/36\r\nChipset P55: Core i5 and i7-800 \r\n● Lynnfield, Nehalem\r\n● Socket: LGA-1156",
            "segment_type": "Page",
            "ocr": null,
            "image": "https://storage.googleapis.com/chunkr-bucket-dev/ccf89702-e38e-4089-bd6b-77e3ba63c341/6c84d8d0-69e2-49c3-a23a-61530affdb6f/images/46ec4a0f-798f-4ca4-8c91-962b43dd3c06.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=GOOG1E6ZKWCYPX4LV42MGE7WJ66QU2EMDPF3DJ2IFHNTQIGHNC2STOGTWF75E%2F20241112%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20241112T041247Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=45273789ee38a9ba357df4d916c6da8c2627b7dfb3b7087a2de09243e2616fc0",
            "html": null,
            "markdown": null
          }
        ],
        "chunk_length": 242
      }
    ],
    "extracted_json": {
      "title": "Document Metadata",
      "schema_type": "object",
      "extracted_fields": [
        {
          "name": "title",
          "field_type": "string",
          "value": "10Gbit/s Bi-Directional Routing on standard hardware running Linux\n"
        },
        {
          "name": "author",
          "field_type": "string",
          "value": "Jesper Dangaard Brouer\n"
        },
        {
          "name": "date_published",
          "field_type": "string",
          "value": "23/9-2009\n"
        },
        {
          "name": "location",
          "field_type": "string",
          "value": "Denmark"
        }
      ]
    }
  }
}